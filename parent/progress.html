<!doctype html><html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>boxXcel — Parent Progress</title><link rel="stylesheet" href="/assets/app.css" /></head><body><script src="/auth/guard.js"></script><div class="shell"><div class="topbar" data-topbar></div><div class="container"><div data-nav></div><div class="card"><h2>Parent — Progress Dashboard</h2><div class="small" id="statusLine">Loading progress data...</div></div><div id="progressContent"></div><div class="footer">boxXcel — Training support only</div></div></div><script src="/assets/config.js"></script>
<script src="/assets/app.js"></script><script>renderTopbar("boxXcel — Parent Progress");renderNav();let API_BASE = "";
  (async function initConfig() {
    try {
      const config = await CONFIG.load();
      API_BASE = config.apiBase;
    } catch (e) {
      console.error("Failed to load config:", e);
      API_BASE = "https://0v4tvwe5l4.execute-api.eu-west-2.amazonaws.com/prod";
    }
  })();function getToken(){return localStorage.getItem("id_token") || localStorage.getItem("access_token") || "";}function authHeadersJson(){return {"Content-Type": "application/json","Authorization": "Bearer " + getToken(),};}async function apiGetJson(url) {const res = await fetch(url, {method: "GET",headers: authHeadersJson(),cache: "no-store"});const text = await res.text();let data = null;try { data = text ? JSON.parse(text) : null; } catch { data = null; }if (!res.ok) {const msg = (data && (data.error || data.message)) ? (data.error || data.message) : (text || `HTTP ${res.status}`);throw new Error(`GET failed (${res.status}): ${msg}`);}return data;}function renderProgressBar(percentage) {return `<div style="width:100%; background:#e0e0e0; border-radius:5px; overflow:hidden; margin:10px 0;"><div style="width:${percentage}%; background:#4CAF50; height:20px; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold;">${percentage}%</div></div>`;}async function loadProgress() {try {const url = `${API_BASE}/api/parent/progress`;const data = await apiGetJson(url);document.getElementById("statusLine").textContent = "Loaded ✓";if (!data || !data.boxers || data.boxers.length === 0) {document.getElementById("progressContent").innerHTML = '<div class="card"><div class="small">No boxers linked to your account.</div></div>';return;}const html = data.boxers.map(boxer => `<div class="card"><h3>${boxer.name || 'Boxer'}</h3><div class="small"><strong>Boxer ID:</strong> ${boxer.boxer_id}</div><div class="small"><strong>Programme Progress:</strong></div>${renderProgressBar(boxer.progress || 0)}<div class="small"><strong>Current Week:</strong> ${boxer.current_week || 'N/A'}</div><div class="small"><strong>Days Completed This Week:</strong> ${boxer.days_completed || 0}</div><div class="small"><strong>Total Days Completed:</strong> ${boxer.total_completed || 0}</div><div class="small"><strong>Last Activity:</strong> ${boxer.last_activity || 'Never'}</div><div class="small"><strong>Email:</strong> ${boxer.email || 'N/A'}</div></div>`).join('');document.getElementById("progressContent").innerHTML = html;} catch (e) {console.error(e);document.getElementById("statusLine").textContent = "Error loading progress: " + e.message;}}loadProgress();</script></body></html>